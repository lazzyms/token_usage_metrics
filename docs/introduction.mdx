---
title: Quick Start & Setup
description: "Get started with Token Usage Metrics in minutes"
---

## Overview

Token Usage Metrics is a production-ready Python package for tracking LLM and embedding token usage with multi-backend support (Redis, PostgreSQL/Supabase, MongoDB).

## Features

<CardGroup cols={2}>
  <Card title="Multi-Backend Support" icon="database" iconType="duotone">
    Redis, PostgreSQL, Supabase, and MongoDB backends with unified API
  </Card>
  <Card title="Rich Aggregations" icon="chart-line" iconType="duotone">
    Daily summaries, project/type grouping, and time-series for dashboards
  </Card>
  <Card title="Async-First" icon="bolt" iconType="duotone">
    Non-blocking operations with background flushing and circuit breakers
  </Card>
  <Card title="Production-Ready" icon="shield-check" iconType="duotone">
    Structured logging, retry logic, graceful fallbacks, and health checks
  </Card>
</CardGroup>

## Installation

Install with Redis support (recommended for getting started):

```bash
uv add token-usage-metrics[redis]
```

<Accordion title="Other Installation Options">

```bash
# All backends
uv add token-usage-metrics[all]

# PostgreSQL only
uv add token-usage-metrics[postgres]

# MongoDB only
uv add token-usage-metrics[mongo]
```

</Accordion>

## Quick Start with Redis

<Steps>
  <Step title="Start Redis">
    Using Docker (recommended):
    
    ```bash
    docker run -d -p 6379:6379 redis:7-alpine
    ```

  </Step>
  
  <Step title="Create Your First Script">
    Simple 3-line example:
    
    ```python
    import asyncio
    from token_usage_metrics import TokenUsageClient

    async def main():
        # Initialize client
        client = await TokenUsageClient.init("redis://localhost:6379/0")

        # Log token usage
        await client.log("my_app", "chat", input_tokens=100, output_tokens=50)

        # Query events
        events, _ = await client.query(project="my_app")
        print(f"Found {len(events)} events")

        await client.aclose()

    asyncio.run(main())
    ```

  </Step>
  
  <Step title="Run It">
    ```bash
    python your_script.py
    # Output: Found 1 events
    ```
  </Step>
</Steps>

## Complete Example

Here's a more comprehensive example with metadata and aggregations:

```python
import asyncio
from datetime import datetime, timedelta, timezone
from token_usage_metrics import TokenUsageClient

async def main():
    # Initialize client
    client = await TokenUsageClient.init("redis://localhost:6379/0")

    # Log multiple events with metadata
    await client.log(
        "chatbot", "chat",
        input_tokens=100, output_tokens=50,
        metadata={"model": "gpt-4", "user": "alice"}
    )

    await client.log(
        "chatbot", "embedding",
        input_tokens=200, output_tokens=0,
        metadata={"model": "text-embedding-ada-002"}
    )

    # Query all events for the project
    events, _ = await client.query(project="chatbot")
    print(f"Total events: {len(events)}")

    # Get daily aggregates for the last 7 days
    daily = await client.aggregate(
        group_by="day",
        time_from=datetime.now(timezone.utc) - timedelta(days=7)
    )

    print("\nDaily Usage:")
    for bucket in daily:
        print(f"{bucket.start.date()}: {bucket.metrics}")

    # Clean up
    await client.aclose()

asyncio.run(main())
```

## What's Next?

<CardGroup cols={2}>
  <Card title="Redis Backend" icon="bolt" href="/backends/redis">
    Deep dive into Redis configuration
  </Card>
  <Card title="PostgreSQL Backend" icon="database" href="/backends/postgres">
    Learn about PostgreSQL setup
  </Card>
  <Card title="MongoDB Backend" icon="leaf" href="/backends/mongodb">
    Explore MongoDB integration
  </Card>
  <Card title="Supabase Backend" icon="cloud" href="/backends/supabase">
    Use Supabase for managed PostgreSQL
  </Card>
</CardGroup>

<Card title="API Reference" icon="code" href="/api-reference/overview">
  Explore the complete API documentation
</Card>
